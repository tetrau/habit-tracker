(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(26)},18:function(e,t,a){},20:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},26:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(11),s=a.n(r),c=(a(18),a(1)),o=a.n(c),l=a(3),d=a(4),u=a(5),h=a(7),m=a(6),b=a(2),p=a(8),v=(a(20),a(21),a(22),a(12)),f=(a(25),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).incOne=a.incOne.bind(Object(b.a)(a)),a.clickHandler=a.clickHandler.bind(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"timestamp",value:function(){return(new Date).getTime()/1e3}},{key:"incOne",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.habit,void 0===t.journal[this.props.dateString]?t.journal[this.props.dateString]={goal:this.props.habit.goal,activity:[this.timestamp()]}:t.journal[this.props.dateString].activity.push(this.timestamp()),e.next=5,this.props.modifiyHabit(t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"clickHandler",value:function(e){var t=e.currentTarget.getBoundingClientRect();e.clientX<(t.left+t.right)/2?this.props.changeMode({habitId:this.props.habit.id,mode:"config"}):this.incOne()}},{key:"activity",value:function(){var e=this.props.habit.journal[this.props.dateString];return void 0===e?[]:e.activity}},{key:"goal",value:function(){var e=this.props.habit.journal[this.props.dateString];return void 0===e?this.props.habit.goal:e.goal}},{key:"render",value:function(){var e=Math.min(100,Math.ceil(this.activity().length/this.goal()*100)),t={width:e.toString()+"%"};return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"card mb-2",onClick:this.clickHandler},i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"mb-0"},this.props.habit.name),i.a.createElement("div",{className:"progress"},i.a.createElement("div",{className:100===e?"progress-bar bg-success":"progress-bar",role:"progressbar",style:t},this.activity().length.toString()+"/"+this.goal().toString()))))))}}]),t}(i.a.Component)),g=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={nameValid:!0,goalValid:!0},a.saveHabit=a.saveHabit.bind(Object(b.a)(a)),a.clickSave=a.clickSave.bind(Object(b.a)(a)),a.clickUndo=a.clickUndo.bind(Object(b.a)(a)),a.clickDelete=a.clickDelete.bind(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"saveHabit",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({nameValid:!0,goalValid:!0}),0!==(t=document.getElementById("habit-name").value||this.props.habit.name).length&&"string"===typeof t){e.next=5;break}return this.setState({nameValid:!1}),e.abrupt("return");case 5:if(a=Number(document.getElementById("habit-goal").value)||this.props.habit.goal,Number.isInteger(a)&&!(a<=0)){e.next=9;break}return this.setState({goalValid:!1}),e.abrupt("return");case 9:return n=this.props.habit,i=n.journal[this.props.dateString],n.name=t,n.goal=a,void 0!==i&&(i.goal=a),e.next=16,this.props.modifiyHabit(n);case 16:this.props.changeMode({mode:"normal"});case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"clickSave",value:function(){var e=Object(l.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveHabit();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"clickDelete",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.habit.id,!window.confirm("Confirm Delete habit -"+this.props.habit.name+"- ?")){e.next=5;break}return e.next=5,this.props.deleteHabit(t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"clickUndo",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.habit,a=this.props.dateString,void 0!==t.journal[a]&&0!==t.journal[a].activity.length){e.next=6;break}return e.abrupt("return");case 6:return t.journal[a].activity.pop(),e.next=9,this.props.modifiyHabit(t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.habit.journal[this.props.dateString];e=void 0===e?[]:e.activity;var t="form-control"+(this.state.nameValid?"":" is-invalid"),a="form-control"+(this.state.goalValid?"":" is-invalid");return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("label",{htmlFor:"habit-name",className:"mb-0"},"Name"),i.a.createElement("input",{id:"habit-name",className:t,placeholder:this.props.habit.name}),!this.state.nameValid&&i.a.createElement("div",{className:"invalid-feedback"},"Please provide a name."),i.a.createElement("label",{htmlFor:"habit-goal",className:"mb-0"},"Goal"),i.a.createElement("input",{id:"habit-goal",className:a,min:"0",type:"number",placeholder:this.props.habit.goal}),!this.state.goalValid&&i.a.createElement("div",{className:"invalid-feedback"},"Please provide a valid goal (positive integer)."),i.a.createElement("div",{className:"d-flex flex-row-reverse mt-2"},i.a.createElement("button",{className:"btn btn-primary",onClick:this.clickSave},"Save"),i.a.createElement("button",{className:"btn btn-danger mr-2",onClick:this.clickDelete},"Delete Habit")))),e.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row mt-2"},i.a.createElement("div",{className:"col-12"},i.a.createElement("ul",{className:"list-group"},e.map(function(e,t){return i.a.createElement("li",{className:"list-group-item",key:t},new Date(1e3*e).toLocaleString())})))),i.a.createElement("div",{className:"row mt-2"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"d-flex flex-row-reverse"},i.a.createElement("button",{className:"btn btn-primary",onClick:this.clickUndo},"Undo Last Activity"))))))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={nameValid:!0,goalValid:!0},a.clickSave=a.clickSave.bind(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"clickSave",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({nameValid:!0,goalValid:!0}),0!==(t=document.getElementById("habit-name").value).length&&"string"===typeof t){e.next=5;break}return this.setState({nameValid:!1}),e.abrupt("return");case 5:if(a=Number(document.getElementById("habit-goal").value),Number.isInteger(a)&&!(a<=0)){e.next=9;break}return this.setState({goalValid:!1}),e.abrupt("return");case 9:return n={goal:a,journal:{},name:t,id:this.uuidv4()},e.next=12,this.props.createHabit(n);case 12:this.props.changeMode({mode:"normal"});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="form-control"+(this.state.nameValid?"":" is-invalid"),t="form-control"+(this.state.goalValid?"":" is-invalid");return i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("label",{htmlFor:"habit-name",className:"mb-0"},"Name"),i.a.createElement("input",{id:"habit-name",className:e,placeholder:"habit name"}),!this.state.nameValid&&i.a.createElement("div",{className:"invalid-feedback"},"Please provide a name."),i.a.createElement("label",{htmlFor:"habit-goal",className:"mb-0"},"Goal"),i.a.createElement("input",{id:"habit-goal",className:t,min:"0",type:"number",placeholder:"daily goal"}),!this.state.goalValid&&i.a.createElement("div",{className:"invalid-feedback"},"Please provide a valid goal (positive integer)."),i.a.createElement("div",{className:"d-flex flex-row-reverse"},i.a.createElement("button",{className:"btn btn-primary mt-2",onClick:this.clickSave},"Save"))))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).clearDatabase=a.clearDatabase.bind(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"clearDatabase",value:function(){var e=Object(l.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Confirm delete the database content?")){e.next=5;break}return e.next=4,this.props.database.clear("habits");case 4:this.props.clearHabit();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col"},i.a.createElement("div",{className:"btn btn-outline-danger btn-lg btn-block",onClick:this.clearDatabase},"Clear Database")))}}]),t}(n.Component),x=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"navbar navbar-light bg-light mb-2"},i.a.createElement("div",{className:"container d-flex justify-content-between"},i.a.createElement("a",{className:"btn btn-outline-link btn-sm",onClick:this.props.clickLeft},"<"),i.a.createElement("a",{className:"navbar-brand"},this.props.dateString),i.a.createElement("a",{className:"btn btn-outline-link btn-sm",onClick:this.props.clickRight,style:{visibility:this.props.hideRight?"hidden":"visible"}},">")))}}]),t}(i.a.Component),j=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={habits:{},date:new Date,mode:{mode:"normal"}},a.dateString=a.dateString.bind(Object(b.a)(a)),a.dateToDateString=a.dateToDateString.bind(Object(b.a)(a)),a.modifiyHabit=a.modifiyHabit.bind(Object(b.a)(a)),a.changeMode=a.changeMode.bind(Object(b.a)(a)),a.createHabit=a.createHabit.bind(Object(b.a)(a)),a.deleteHabit=a.deleteHabit.bind(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"dateToDateString",value:function(e){return e.getFullYear().toString().padStart(4,"0")+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}},{key:"dateString",value:function(){return this.dateToDateString(this.state.date)}},{key:"changeMode",value:function(e){this.setState({mode:e})}},{key:"modifiyHabit",value:function(){var e=Object(l.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.put("habits",t);case 2:(a=this.state.habits)[t.id]=t,this.setState({habits:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteHabit",value:function(){var e=Object(l.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.delete("habits",t);case 2:delete(a=this.state.habits)[t],this.setState({habits:a,mode:{mode:"normal"}});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createHabit",value:function(){var e=Object(l.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.add("habits",t);case 2:(a=this.state.habits)[t.id]=t,this.setState({habits:a});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,a,n,i,r,s,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)("habitTracker",1,{upgrade:function(e,t,a,n){console.log("create database"),e.createObjectStore("habits",{keyPath:"id"})}});case 2:return t=e.sent,this.database=t,e.next=6,t.count("habits");case 6:if(0!==e.sent){e.next=20;break}return a=[],n=this.database.transaction("habits","readwrite"),i=n.objectStore("habits"),e.next=13,Promise.all(a.map(function(e){return i.add(e)}));case 13:return e.next=15,n.done;case 15:r={},a.forEach(function(e){return r[e.id]=e}),this.setState({habits:r}),e.next=26;break;case 20:return e.next=22,this.database.getAll("habits");case 22:s=e.sent,c={},s.forEach(function(e){return c[e.id]=e}),this.setState({habits:c});case 26:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this,n=[];for(var r in this.state.habits){var s=i.a.createElement(f,{habit:this.state.habits[r],dateString:this.dateString(),key:r,modifiyHabit:this.modifiyHabit,changeMode:this.changeMode});n.push(s)}var c=i.a.createElement(x,{clickLeft:function(){var e=a.state.date;e.setDate(a.state.date.getDate()-1),a.setState({date:e})},clickRight:function(){var e=a.state.date;e.setDate(a.state.date.getDate()+1),a.setState({date:e})},hideRight:!1,dateString:this.dateString()}),o=i.a.createElement(x,{clickLeft:function(){return a.changeMode({mode:"normal"})},clickRight:function(){},hideRight:!0,dateString:this.dateString()});return"normal"===this.state.mode.mode?(e=i.a.createElement(i.a.Fragment,null,n,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-6 pr-1"},i.a.createElement("div",{className:"btn btn-outline-primary btn-lg btn-block",onClick:function(){return a.changeMode({mode:"appConfig"})}},i.a.createElement("i",{className:"fas fa-cog"}))),i.a.createElement("div",{className:"col-6 pl-1"},i.a.createElement("div",{className:"btn btn-outline-primary btn-lg btn-block",onClick:function(){return a.changeMode({mode:"create"})}},i.a.createElement("i",{className:"fas fa-plus"}))))),t=c):"config"===this.state.mode.mode?(e=i.a.createElement(g,{habit:this.state.habits[this.state.mode.habitId],dateString:this.dateString(),modifiyHabit:this.modifiyHabit,changeMode:this.changeMode,deleteHabit:this.deleteHabit}),t=o):"create"===this.state.mode.mode?(e=i.a.createElement(k,{changeMode:this.changeMode,createHabit:this.createHabit}),t=o):"appConfig"===this.state.mode.mode&&(e=i.a.createElement(y,{clearHabit:function(){a.setState({mode:{mode:"normal"},habits:{}})},database:this.database}),t=o),i.a.createElement("div",{className:"container"},t,e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.b4c2541a.chunk.js.map